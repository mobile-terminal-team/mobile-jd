<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>login</title>
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/login.css">
</head>
<body>
    <header>
        <div class="header">
            京东登录
            <a href="../index.html"><i class="iconfont">&#xe63a;</i></a>
        </div>
    </header>
    <section>
        <form action="" id="form">
            <input type="text" class="userName" placeholder="请输入手机号" required >
            <input type="text" class="password" placeholder="请输入密码" required >
            <input type="text" class="code" placeholder="请输入验证码" >
            <input type="submit" class="login" value="登录">
        </form>
        <p><i class="iconfont">&#xe60b;</i>一个月内免登录</p>
        <p>
            <span><i class="iconfont">&#xe6ca;</i>找回密码</span>
            <span><a href="./sign.html"><i class="iconfont">&#xe621;</i>快速注册</a></span>
        </p>
    </section>
    <footer>

        <p><em></em>其他登录方式<em></em></p>
        <span><i class="iconfont">&#xe646;</i><p>QQ</p></span>
    </footer>
    <script src="../js/zepto.min.js"></script>
    <script src="../js/login.js"></script>
    <script>
        window.onload=function(){
            oUserName.focus();
        }
        var oUserName=document.getElementsByClassName("userName")[0];
        var oPassword=document.getElementsByClassName("password")[0];
        var oCode=document.getElementsByClassName("code")[0];
        var oLogin=document.getElementsByClassName("login")[0];
        var str="abcdefghijklmnopqrstuvwxyz0123456789";
        var istrue;
        //判断手机号格式
        oUserName.onblur=function(){
            var re=/[1][0-9]{10}/;
            var uName=this.value;
            if(!re.test(uName)){
                istrue=false;
                this.style.borderColor="red";
                this.focus();
            }else{
                istrue=true;
                this.style.borderColor="";
            }
        }
        //获取验证码
        oCode.onfocus=function(){
            this.value="";
            var code="";
            for(var i=0;i<4;i++){
                code+=str[Math.floor(Math.random()*36)];
            }
            this.placeholder="您的验证码为："+code;
            this.code=code;
        }
        //验证码判断
        oCode.onblur=function(){
            if(this.value !== this.code){
                this.style.borderColor="red";
                istrue=false;
                this.focus();
            }else{
                this.style.borderColor="";
                istrue=true;
            }
        }
        //登录按钮事件
        oLogin.onclick=function(){
            var uName=oUserName.value;
            var uPassword=oPassword.value;
            if(istrue){
                if(localStorage[uName]){
                    var obj=JSON.parse(localStorage[uName]);
                    if(obj.id==uName&&obj.password==uPassword){
                        //在此写登录成功后的业务逻辑
                        localStorage.setItem("now",uName);
                        window.open("./../index.html");
                    }else{
                        //在此写登录失败的业务逻辑
                        alert("账号或密码错误");
                    }
                }
            }
        }
    </script>

</body>
</html>



























