<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>sign</title>
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/sign.css">
</head>
<body>
    <header>
        <div class="header">
            京东注册
            <i class="iconfont">&#xe63a;</i>
        </div>
    </header>
    <section>
        <form action="" id="form">
            <input type="text" class="userName" required placeholder="请输入正确的手机号">
            <input type="text" class="password" required placeholder="请输入密码">
            <input type="text" class="apassword" required placeholder="请确认密码">
            <input type="submit" class="login" value="注册">
        </form>
        <p>
            <span><i class="iconfont">&#xe6ca;</i>找回密码</span>
            <span><i class="iconfont">&#xe621;</i>去登录</span>
        </p>
    </section>
    <footer>

        <p><em></em>其他登录方式<em></em></p>
        <span><i class="iconfont">&#xe646;</i><p>QQ</p></span>
    </footer>
    <script src="../js/zepto.min.js"></script>
    <script src="../js/login.js"></script>
    <script>
        window.onload=function(){
            oUserName.focus();
        }
        var oUserName=document.getElementsByClassName("userName")[0];
        var oPassword=document.getElementsByClassName("password")[0];
        var oaPassword=document.getElementsByClassName("apassword")[0];
        var oCode=document.getElementsByClassName("code")[0];
        var oLogin=document.getElementsByClassName("login")[0];
        var istrue=true;
        oUserName.onblur=function(){
            var re=/[1][0-9]{10}/;
            var uName=this.value;
            if(!re.test(uName)){
                istrue=false;
                this.style.borderColor="red";
                this.focus();
            }else{
                istrue=true;
                this.style.borderColor="";
            }
        }
        oPassword.onblur=function(){
            var re=/[a-z0-9]{6,13}/;
            var uPassword=oPassword.value;
            if(!re.test(uPassword)){
                istrue=false;
            }else{
                istrue=true;
            }
        }
        oaPassword.onblur=function(){
            var uPassword=oPassword.value;
            var uaPassword=oaPassword.value;
            if(uPassword!==uaPassword){
                istrue=false;
                this.style.borderColor="red";
                this.placeholder="两次输入的密码不正确";
                this.focus();
            }else{
                istrue=true;
                this.style.borderColor="";
            }
        }
        oLogin.onclick=function(){
            var uName=oUserName.value;
            var uPassword=oPassword.value;
            if(istrue){
                var obj={
                    "id":oUserName.value,
                    "password":oPassword.value,
                    "shop":[]
                }
                console.log(obj);
                if(localStorage[oUserName.value]){
                    alert("用户名已存在");
                }else{
                    localStorage.setItem(oUserName.value,JSON.stringify(obj));
                    alert("注册成功");
                }

            }else{
                alert("账号或密码错误");
                oUserName.value=uName;
                oPassword.value=uPassword;
            }
        }
    </script>

</body>
</html>



























